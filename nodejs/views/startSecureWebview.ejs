<!DOCTYPE html>
<html lang="en" class="gr__s3-ap-northeast-1_amazonaws_com">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0">
    <meta name="google" content="notranslate" />
    <style>
        .popup-cover {
            align-items: center;
            justify-content: center;
            position: fixed;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,.9);
            top: 0;
            left: 0;
            z-index: 1001;
        }
        .loader {
            width: 50px;
            aspect-ratio: 1;
            border-radius: 50%;
            background:
                radial-gradient(farthest-side,#ffa516 94%,#0000) top/8px 8px no-repeat,
                conic-gradient(#0000 30%,#ffa516);
            -webkit-mask: radial-gradient(farthest-side,#0000 calc(100% - 8px),#000 0);
            animation: l13 1s infinite linear;
            text-align: center;
        }
        @keyframes l13{
            100%{transform: rotate(1turn)}
        }
    </style>
</head>

<body data-gr-c-s-loaded="true">
<div id="white_cover" class="popup-cover" style="display: flex;">
    <div class="loader"></div>
</div>
<div id="AmazonPayButton"></div>

<script src="https://static-fe.payments-amazon.com/checkout.js"></script>
<script type="text/javascript" charset="utf-8">
    function getURLParameter(name, source) {
        return decodeURIComponent((new RegExp('[?|&amp;|#]' + name + '=' +
                        '([^&;]+?)(&|#|;|$)').exec(source) || [, ""])[1].replace(/\+/g, '%20')) || null;
    }
    document.cookie = `secureToken=${getURLParameter('secureToken', location.search)}; path=/;` // CookieにsecureTokenを保存

    amazon.Pay.initCheckout({
        // set checkout environment
        merchantId: 'A23YM23UEBY8FM',
        ledgerCurrency: 'JPY',
        // customize the buyer experience
        checkoutLanguage: 'ja_JP',
        productType: 'PayAndShip',
        placement: 'Other',
        sandbox: true,
        // configure Create Checkout Session request
        createCheckoutSessionConfig: {                     
<% if (client === 'iosApp') { // iOS・Android間でSimulatorからのHost OSのlocalhostの表現方法の違いを吸収するための分岐。本番や検証サーバーではこの分岐は必要ない。 %>
            payloadJSON: '{"webCheckoutDetails":{"checkoutReviewReturnUrl":"https://localhost:3443/static/pauseSecureWebview.html","checkoutCancelUrl":"https://localhost:3443/static/cancelSecureWebview.html?client=iosApp"},"storeId":"amzn1.application-oa2-client.242a859efb5f47f09847f3f0aebd50ca","scopes":["name","email","phoneNumber","billingAddress"],"processorSpecifications":{"name":"gmopg"}}', // string generated in step 2
            signature: 'kBYcZSLBEgVFSjsK+oQJLF+P8Jtn/BAUmPe2X363r9m1STH1WEYkgoe2SQAw36T40w0wVIOvdvWUph/y43X1Z027HcpbW1iLhQ9CnDEeQgrxx50XVWEdMHx9VX3jy0Mk5AbbfI4PFAsR/6wGoVEPsajBd54LDAKj8k1T+A6FK9bt2P0+VKlhXN3EMMnjxBr1FrYapgXZSxccorK2lzhtdSCcFdKZ9Cpv57Ah3h1sw8M84SYEWdFlcgRvAdBpj00bsBi7MH3JFgryETd2s/X1Ju8Vq8yGindd0KteXojI++orFfpa7aATVrF8Y8+xvF0ZvyaXWPJuaKBJvAAJ4QNcpg==', // signature generated in step 3
<% } else { %>
            payloadJSON: '{"webCheckoutDetails":{"checkoutReviewReturnUrl":"https://10.0.2.2:3443/static/pauseSecureWebview.html","checkoutCancelUrl":"https://10.0.2.2:3443/static/cancelSecureWebview.html?client=androidApp"},"storeId":"amzn1.application-oa2-client.242a859efb5f47f09847f3f0aebd50ca","scopes":["name","email","phoneNumber","billingAddress"],"processorSpecifications":{"name":"gmopg"}}', // string generated in step 2
            signature: 'UgdQh8K1QY5w8ARzr69L0VXEdS0EAE29edqDUrwxmRLw8bn7ooPZW1KZ9Dq7tQ58uzmiVONmnrxkNYxPqW3V6PR44fIPRlIFRH6fJ8GH33knyCe5KacgCkUBMdnOWMu8LrZjh0GB5lS4+UWfPb2amFiJjW8Fj2BXbUA9RFEpCgLiVMNp+tU6O07dZL3CY+iIHE/d1AR8JM3tgzxfDidouSqZJ9Lrhx96SeTb0w/ylPhaYsf92RPyPYXaUjtcMrc/NGNSMdT3cq47s1MqzV8bHLYeHKSAfmcnmfJrwYS7c8U5/mwDdCCaGp7zdn1ZcxMTbNfVPwbwjcMYDO0pqZJYjg==', // signature generated in step 3
<% } %>
            publicKeyId: 'SANDBOX-AGH2Y6VC2VAUJ27GG6VDFOTD',
            algorithm: 'AMZN-PAY-RSASSA-PSS-V2'
        }
    });
</script>

</body>
</html>
