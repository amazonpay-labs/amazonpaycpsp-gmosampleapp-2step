<!DOCTYPE html>
<html lang="en" class="gr__s3-ap-northeast-1_amazonaws_com">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0">
    <meta name="google" content="notranslate" />
    <style>
        .popup-cover {
            align-items: center;
            justify-content: center;
            position: fixed;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,.9);
            top: 0;
            left: 0;
            z-index: 1001;
        }
        .loader {
            width: 50px;
            aspect-ratio: 1;
            border-radius: 50%;
            background:
                radial-gradient(farthest-side,#ffa516 94%,#0000) top/8px 8px no-repeat,
                conic-gradient(#0000 30%,#ffa516);
            -webkit-mask: radial-gradient(farthest-side,#0000 calc(100% - 8px),#000 0);
            animation: l13 1s infinite linear;
            text-align: center;
        }
        @keyframes l13{
            100%{transform: rotate(1turn)}
        }
    </style>
</head>

<body data-gr-c-s-loaded="true">
<div id="white_cover" class="popup-cover" style="display: flex;">
    <div class="loader"></div>
</div>
<div id="AmazonPayButton"></div>

<script src="https://static-fe.payments-amazon.com/checkout.js"></script>
<script type="text/javascript" charset="utf-8">
    function getURLParameter(name, source) {
        return decodeURIComponent((new RegExp('[?|&amp;|#]' + name + '=' +
                        '([^&;]+?)(&|#|;|$)').exec(source) || [, ""])[1].replace(/\+/g, '%20')) || null;
    }
    document.cookie = `secureToken=${getURLParameter('secureToken', location.search)}; path=/;` // CookieにsecureTokenを保存

    amazon.Pay.initCheckout({
        // set checkout environment
        merchantId: 'A23YM23UEBY8FM',
        ledgerCurrency: 'JPY',
        // customize the buyer experience
        checkoutLanguage: 'ja_JP',
        productType: 'PayAndShip',
        placement: 'Other',
        sandbox: true,
        // configure Create Checkout Session request
        createCheckoutSessionConfig: {                     
<% if (client === 'iosApp') { // iOS・Android間でSimulatorからのHost OSのlocalhostの表現方法の違いを吸収するための分岐。本番や検証サーバーではこの分岐は必要ない。 %>
            payloadJSON: '{"webCheckoutDetails":{"checkoutReviewReturnUrl":"https://localhost:3443/static/pauseSecureWebview.html","checkoutCancelUrl":"https://localhost:3443/static/cancelSecureWebview.html?client=iosApp"},"storeId":"amzn1.application-oa2-client.242a859efb5f47f09847f3f0aebd50ca","scopes":["name","email","phoneNumber","billingAddress"]}', // string generated in step 2
            signature: 'fGeexZuLy5wLV7JnYyl1/bacx0qyXJIjfiurW7ZfO1f1ahUSCHTuNXYHt8OZU1FHt2KRwVRdxhSeMy9guoS5ygKuk/roDUKZSFsHy9s9cocM+vmIR4BnyzsQdrUPHyAvxs2Ud3y3CZdX9J3H8I8oOHy2W3FVkbXAL9mBB0R5u2UDCfI05l02/4YNua9GatYMXvJQPaVck3LkY+/fA86gRJD2s2enAAlrmN936rBvQSOgJeCFXO7DrqkROpQRki0AuYx2gvCMrvThztu3xEsGEeUHDSAetMfYIfgPjtfT2tJKg9cHMC66KUY4kDQdSHE8SRPxmZ4W0Aawxm/CMQMOUg==', // signature generated in step 3
<% } else { %>
            payloadJSON: '{"webCheckoutDetails":{"checkoutReviewReturnUrl":"https://10.0.2.2:3443/static/pauseSecureWebview.html","checkoutCancelUrl":"https://10.0.2.2:3443/static/cancelSecureWebview.html?client=androidApp"},"storeId":"amzn1.application-oa2-client.242a859efb5f47f09847f3f0aebd50ca","scopes":["name","email","phoneNumber","billingAddress"]}', // string generated in step 2
            signature: 'VK9hoDvKDPekzme18WXxMQFaJ+nzS9gdO0QaUNEPVsynX7Fhcz6JAd4R5IuwSnG7y3jC6/gUxdorgX+T2hvjRnCX8I9DNjrT/rgtze7NkldF1lbiy03pHyI5ZwisYIyp+ApkOmeyXrCW4sbZefsqIgHwDta1GGCYoXwAjGzxikVjhHrisk0cl/sbBK8lGCCuGKD6edxRZEGfQslbtf4YZYNwXnieYYuIyzqt8SB2mkmSsxzjntTKxqjpQVDmu62wVT7XPeG0DgpakKmDYs5B59XIdoc6p8N+SbTtXlXx7UdmEWTdjxlNGNLzd0vYUbvi+AVkuFwrVfFYSYKIxU9Oeg==', // signature generated in step 3
<% } %>
            publicKeyId: 'SANDBOX-AGH2Y6VC2VAUJ27GG6VDFOTD',
            algorithm: 'AMZN-PAY-RSASSA-PSS-V2'
        }
    });
</script>

</body>
</html>
